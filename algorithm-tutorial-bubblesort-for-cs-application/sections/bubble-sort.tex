\section{Bubble Sort}

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Basic Idea}
  Basic idea: to eliminate all adjacent inversions
  \pause

  \input{algs/bubble-sort-basic-idea-overlay}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Definiteness}
  \input{algs/bubble-sort-alg-overlay}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Example}
  % \begin{center}
  %   \scalebox{0.50}{
  %     \begin{minipage}{0.70\linewidth}
  %   	\input{algs/bubble-sort-alg}
  %     \end{minipage}
  %   }
  % \end{center}

  \begin{center}
	\input{tikz/bubble-sort-example-overlay}
  \end{center}

  \uncover<13->{
	After each ``{\bf for}'' loop, one more element is bubbled up to its final position.
  }
  % \[
  %   5\quad 3\quad 1\quad 6\quad 7\quad 2\quad 4\quad 8
  % \]
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Finiteness}
  \begin{center}
	\scalebox{0.75}{
	  \begin{minipage}{0.70\linewidth}
		\input{algs/bubble-sort-alg}
	  \end{minipage}
	}
  \end{center}

  The inner ``{\bf for}'' loops:
  \begin{enumerate}[1)]
	\item \textcolor{blue}{$\exists$ loop : no swaps} $\implies$ swapped = false $\implies$ terminates
	  \pause
	\item \textcolor{red}{$\forall$ loop : has swaps} \pause \qquad \textcolor{red}{\bf \textsc{Impossible}!}
  \end{enumerate}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Finiteness}
  \begin{center}
	\fbox{Fact: total \#inversions is finite.}
  \end{center}

  \pause
  Effects of \textsc{Swap}{($a_{i}, a_{i+1}$)} on \textcolor{red}{\#inversions}\footnote{Not on \textcolor{blue}{\#adjacent inversions}! Think about it.}:
  \fignocaption{width = 0.50\textwidth}{figs/swap-inversions.pdf}

  \pause
  \begin{center}
	\textcolor{blue}{$-1: (a_{i},a_{i+1})$}\\[3pt] \pause 
	\textcolor{red}{${}+{}0:$} relative order between any other two elements does not change!\\[3pt] \pause
	$(a_k, a_l), (a_m, a_n), \textcolor{red}{(a_k, a_i), (a_i, a_m)}$
  \end{center}

  \pause
  \begin{center}
	\fbox{$\textsc{Swap}(a_{i}, a_{i+1}) \implies -1 \text{ inversion}$}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Correctness}
  \begin{align*}
	\onslide<1->{\text{\textcolor{blue}{\bf Finiteness }}}
	  \onslide<2->{&\implies \exists \text{ loop : no swaps} \\[3pt]}
	  \onslide<3->{&\implies A \text{ has no adjacent inversions any more} \\[3pt]}
	  \onslide<4->{&\implies A \text{ is already sorted.}}
  \end{align*}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Optimizing Bubble Sort (I)\footnote{See Appendix for ``Optimizing Bubble Sort (II)''.}}
  After each ``{\bf for}'' loop, one more element is bubbled up to its final position.

  \input{algs/bubble-sort-alg-mfp}
\end{frame}
%%%%%%%%%%%%%%%%%%%%