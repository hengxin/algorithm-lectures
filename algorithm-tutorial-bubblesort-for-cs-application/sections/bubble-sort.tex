\section{Bubble Sort}

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort}
  Basic idea: to eliminate all adjacent inversions

  \input{algs/bubble-sort-basic-idea-overlay}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Definiteness}
  \input{algs/bubble-sort-alg-overlay}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Example}
  \begin{center}
	\scalebox{0.50}{
	  \begin{minipage}{0.70\linewidth}
		\input{algs/bubble-sort-alg}
	  \end{minipage}
	}
  \end{center}

  \begin{center}
	\input{tikz/bubble-sort-example-overlay}
  \end{center}

  % \[
  %   5\quad 3\quad 1\quad 6\quad 7\quad 2\quad 4\quad 8
  % \]
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Finiteness}
  \begin{center}
	\scalebox{0.75}{
	  \begin{minipage}{0.70\linewidth}
		\input{algs/bubble-sort-alg}
	  \end{minipage}
	}
  \end{center}

  \pause

  The inner ``{\bf for}'' loops:
  \begin{enumerate}[1)]
	\item \textcolor{blue}{$\exists$ loop : no swaps} $\implies$ swapped = false $\implies$ terminates
	  \pause
	\item \textcolor{red}{$\forall$ loop : has swaps} \pause \qquad \textcolor{red}{\bf \textsc{Impossible}!}
  \end{enumerate}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Finiteness}
  Effects of \textsc{Swap}{($a_{i}, a_{i+1}$)} on adjacent inversions:
  \fignocaption{width = 0.50\textwidth}{figs/swap-adjacent-inversions.pdf}

  \pause
  \begin{center}
	\textcolor{blue}{$-1: (7,2)$} \pause \qquad\qquad \textcolor{red}{$+2: (6,2), (7,4)$}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Finiteness}
  Effects of \textsc{Swap}{($a_{i}, a_{i+1}$)} on \textcolor{red}{\#inversions}:
  \fignocaption{width = 0.50\textwidth}{figs/swap-inversions.pdf}

  \pause
  \begin{center}
	\textcolor{blue}{$-1: (a_{i},a_{i+1})$} \pause \qquad\qquad \textcolor{red}{$+0$}
  \end{center}

  \pause
  \vspace{0.20cm}

  \begin{center}
	Total \#inversions is finite.
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Correctness}
  \begin{center}
	\fbox{$A$ is sorted $\iff$ $A$ has no adjacent inversions.}
  \end{center}

  \begin{align*}
	\onslide<2->{\text{\textcolor{blue}{\bf Finiteness }}}
	  \onslide<3->{&\implies \exists \text{ loop : no swaps} \\[3pt]}
	  \onslide<4->{&\implies A \text{ has no adjacent inversions any more} \\[3pt]}
	  \onslide<5->{&\implies A \text{ is already sorted.}}
  \end{align*}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Bubble Sort: Correctness}
  \begin{center}
	\scalebox{0.70}{
	  \begin{minipage}{0.80\linewidth}
		\input{algs/bubble-sort-alg-correctness}
	  \end{minipage}
	}
  \end{center}

  \pause

  \begin{center}
	\textcolor{blue}{\bf Loop invariant:\\[3pt]} 
	Before the $k$-th {\small ($k \ge 1$)} ``{\bf for}'' loop, $a_{n-(k-1)} \cdots a_{n}$ \\
	(1) consists of the largest $(k-1)$ elements \\
	(2) in sorted order. 
  \end{center}

  \pause

  \begin{center}
	Correctness: Initialization + Maintenance + Termination
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Optimizing Bubble Sort}

  \input{algs/bubble-sort-alg-mfp}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Optimizing Bubble Sort}
  \begin{align*}
	3\quad 1\quad 4\quad 2\quad 5\quad 6\quad 7\\[3pt]
	1\quad 3\quad 2\quad \textcolor{red}{4}\quad \textcolor{red}{5}\quad 6\quad 7
  \end{align*}

  \begin{center}
	\scalebox{0.85}{
	  \begin{minipage}{0.80\linewidth}
		\input{algs/bubble-sort-alg-lsp-overlay}
	  \end{minipage}
	}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%