\section{Analysis of Bubble Sort}

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Time Complexity of Bubble Sort}
  \begin{itemize}
	\setlength{\itemsep}{10pt}
	\item Finiteness is NOT enough $\implies$ Quantifying finiteness
	  \pause
	\item Time on real computers varies $\implies$ \#Ops on our model:
	  \vspace{5pt}
	  \pause
	  \begin{description}
		\setlength{\itemsep}{5pt}
		% \item[$|P|:$] \#Passes \hfill (the ``{\bf for}'' loops)
		\item[$|C|:$] \#Comparisons \hfill ({\bf if} $a_{i} > a_{i+1}$)
		\item[$|S|:$] \#Swaps  \hfill ($\textsc{Swap}(a_{i}, a_{i+1})$)
	  \end{description}
	  % \pause
	  % \[
	  %   |C| \ge |S|
	  % \]
	  % \vspace{-0.50cm}
	  \pause
	\item Different inputs $\implies$ $|C|$ and $|S|$ vary:
	  \vspace{5pt}
	  \pause
	  \begin{itemize}
		\item Best-case, worst-case, and average-case analysis
	  \end{itemize}
\end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Best-case and Worst-case Analysis}
  \uncover<2->{
  \[
	\text{\textcolor{blue}{Best-case:} } 1\quad 2\; \cdots\; n\quad
  \]}
  
  \begin{displaymath}
	\begin{array}{lll}
	  & \hfill \textcolor{blue}{\frac{\text{Best-case:}}{\uncover<2->{\text{non-decreasingly sorted}}}} \hfill 
	  & \hfill \textcolor{red}{\frac{\text{Worst-case:}}{\uncover<4->{\text{non-increasingly sorted}}}} \\[10pt]
	  % |P| & = (\uncover<3->{\min: 1,} & \uncover<5->{\max: n}); \\[6pt]
	  |C| & = (\uncover<3->{\min: n-1,} & \uncover<5->{\max: \frac{n^2 - n}{2}}); \\[6pt]
	  |S| & = (\uncover<3->{\min: 0,} & \uncover<5->{\max: \frac{n^2 - n}{2}}).
	\end{array}
  \end{displaymath}

  \uncover<4->{
	\[
	  \text{\textcolor{red}{Worst-case: }} n\quad n-1\; \cdots\; 1
	\]}
  % \uncover<5->{
  %   \[
  %     \#\text{inversions} = (n-1) + (n-2) + \cdots + 1 = \frac{n^2 - n}{2}.
  %   \]
  % }
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{$|S|:$ \#Swaps (Average-case Analysis)\footnote{An exercise: what is $|C|$ (\#Comparisions) in average?}}
  Assumptions on inputs:
  \begin{enumerate}
	\item The input is a random permutation (``average input'')
	  \pause
	\item All numbers are different (for simplicity)
  \end{enumerate}

  \pause

  \begin{center}
	\fbox{\textcolor{blue}{Lemma:} $\textsc{Swap}(a_{i}, a_{i+1}) \implies -1 \text{ inversion}$}
  \end{center}

  \[
	|S| = \textcolor{red}{\mathbb{E}(\#\text{inversions})}
  \]
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{$|S|:$ \#Swaps (Average Analysis)}
  \begin{align*}
	% \onslide<1->{I_{ij} &: \text{indicator of inversion } (a_i, a_j) \\[3pt]}
	\onslide<1->{I_{ij} &= \left\{\begin{array}{lr}
		1 & (a_i, a_j) \text{ is an inversion}\\
		0 & \text{ o.w.} 
	  \end{array}\right.\\[3pt]}
	\onslide<1->{X &= \sum_{1 \le i < n} \sum_{i < j \le n} I_{ij}\qquad\quad (\text{\#inversions}) \\[3pt]}
	\onslide<2->{\mathbb{E}(X) &= \mathbb{E}(\sum_{i} \sum_{j>i} I_{ij})}\onslide<3->{= \sum_{i} \sum_{j>i} \mathbb{E}(I_{ij})\quad (\text{linearity of expectation})\\[3pt]}
	\onslide<4->{\mathbb{E}(I_{ij}) &= \mathbb{P}\set{I_{ij} = 1}} \onslide<5->{{}={} \frac{1}{2}\qquad (a_i \neq a_j; \text{half: } a_i < a_j, \text{half: } a_i > a_j) \\[3pt]}
	\onslide<6->{\mathbb{E}(X) &= \sum_{i} \sum_{i<j} \frac{1}{2} = \binom{n}{2} \cdot \frac{1}{2} = \frac{n(n-1)}{4} \textcolor{red}{{}={} O(n^2)}}
  \end{align*}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Faster Algorithms}
  \begin{quote}
	It took a good deal of work to analyze the bubble sort;
	and although [\dots], 
	the results are disappointing 
	since they tell us that \textcolor{red}{the bubble sort isn't really very good at all}.\\
	\hfill --- Donald E. Knuth
  \end{quote}

  \pause

  \begin{center}
	faster: $O(n^2) \to O(n \lg n)$?\\[5pt] \pause
	\dots and faster: $O(n \lg n) \to O(n)$?
  \end{center}

  \pause
  \fignocaption{width = 0.18\textwidth}{figs/stay-tuned.jpg}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\begin{frame}[noframenumbering]
  \fignocaption{width = 0.20\textwidth}{figs/qa.png}
  \vspace{-0.8cm}
  \begin{center}
    \textcolor{blue}{\bf \large hengxin0912@gmail.com}
  \end{center}
  \vspace{-0.5cm}
  \fignocaption{width = 0.50\textwidth}{figs/thankyou.jpg}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
